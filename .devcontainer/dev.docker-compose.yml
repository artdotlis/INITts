version: '3'
services:
    dev:
        user: vscode
        build:
            context: .
            dockerfile: .devcontainer/dev.Dockerfile
            args:
                - USERNAME=vscode
                - USER_UID=1000
                - USER_GID=1000
                - WORK_DIR=/workspace
        volumes:
            - static-content:/workspace/public
            - .:/workspace:cached
            - ~/.gitconfig:/etc/gitconfig
    nginx:
        image: docker.io/nginx:stable
        volumes:
            - static-content:/var/www/
            - ./configs/dev/api_nginx.conf:/etc/nginx/conf.d/default.conf
        ports:
            - 8085:80

volumes:
    static-content:
